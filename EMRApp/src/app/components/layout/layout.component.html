<div class="layout-wrapper">
  <!-- Top Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <button class="btn btn-link text-white me-3 d-lg-none" (click)="toggleMobileMenu()">
        <span class="navbar-toggler-icon"></span>
      </button>

      <a class="navbar-brand" routerLink="/dashboard">
        ğŸ¥ Student Clinic EMR
      </a>

      <div class="ms-auto d-flex align-items-center">
        <span class="text-white me-3 d-none d-md-inline">
          {{ currentUser?.firstName }} {{ currentUser?.lastName }}
        </span>
        <button class="btn btn-outline-light btn-sm" (click)="logout()">
          Logout
        </button>
      </div>
    </div>
  </nav>

  <div class="main-container">
    <!-- Sidebar -->
    <aside
      class="sidebar"
      [class.collapsed]="isSidebarCollapsed"
      [class.mobile-open]="isMobileMenuOpen"
    >
      <div class="sidebar-header">
        <button class="btn btn-link text-white d-none d-lg-block" (click)="toggleSidebar()">
          <span *ngIf="!isSidebarCollapsed">â˜°</span>
          <span *ngIf="isSidebarCollapsed">â†’</span>
        </button>
      </div>

      <ul class="sidebar-menu">
        <li>
          <a routerLink="/dashboard" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ </span>
            <span class="menu-text">Dashboard</span>
          </a>
        </li>
        <li>
          <a routerLink="/patients" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ‘¥</span>
            <span class="menu-text">Patients</span>
          </a>
        </li>
        <li>
          <a routerLink="/visits" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ“‹</span>
            <span class="menu-text">Visits</span>
          </a>
        </li>
        <li>
          <a routerLink="/prescriptions" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ’Š</span>
            <span class="menu-text">Prescriptions</span>
          </a>
        </li>
        <li>
          <a routerLink="/pharmacy" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸª</span>
            <span class="menu-text">Pharmacy</span>
          </a>
        </li>
        <li>
          <a routerLink="/users" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ‘¤</span>
            <span class="menu-text">Users</span>
          </a>
        </li>
        <li>
          <a routerLink="/audit" routerLinkActive="active" (click)="isMobileMenuOpen = false">
            <span class="menu-icon">ğŸ“Š</span>
            <span class="menu-text">Audit Logs</span>
          </a>
        </li>
      </ul>
    </aside>

    <!-- Main Content Area -->
    <main class="content-area">
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    class="mobile-overlay"
    *ngIf="isMobileMenuOpen"
    (click)="toggleMobileMenu()"
  ></div>
</div>
